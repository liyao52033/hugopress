{{ define "main" }}

<div class="container py-4">
  <a href="/tags/">
     <h1 class="mb-4">所有标签</h1>
  </a>
  <div class="row g-3">
    {{ range $name, $taxonomy := .Site.Taxonomies.tags }}
      <div class="col-md-3">
        <a href="{{ "/tags/" | relURL }}{{ $name | urlize }}" class="text-decoration-none">
          <div class="card h-100 shadow-sm">
            <div class="card-body d-flex justify-content-between align-items-center">
              <span class="fw-bold">{{ $name }}</span>
              <span class="badge rounded-pill" style="background-color: #0066ff; color: white;">{{ .Count }}篇</span>
            </div>
          </div>
        </a>
      </div>
    {{ end }}
  </div>
</div>

{{ $pages := .Pages }}
{{ if eq .Kind "taxonomy" }}
  {{/* 标签首页，显示所有 type 为 docs 的文章 */}}
  {{ $pages = where .Site.RegularPages "Type" "docs" }}
{{ end }}

<div class="container py-4">
  <h1>
    {{ if eq .Kind "taxonomy" }}
      所有文章 ({{ len $pages }} 篇)
    {{ else }}
      {{ .Title }} 标签下的文章
    {{ end }}
  </h1>
</div>

<div class="container py-4">
  {{ if $pages }}
    <div class="row g-4">
      {{ range $pages }}
        <div class="col-md-4">
          <div class="card h-100 shadow-sm">
            <div class="card-body">
              <h5 class="card-title">
                <a href="{{ .Permalink }}" class="text-decoration-none">{{ .Title }}</a>
              </h5>
              <p class="card-text text-muted">
                {{ if .Description }}
                  {{ .Description }}
                {{ else }}
                  暂无摘要
                {{ end }}
              </p>
            </div>
            <div class="card-footer d-flex justify-content-between align-items-center">
              <small class="text-muted">发表于 {{ .Date.Format "2006-01-02" }}</small>
              <small class="text-muted">⏱️ {{ .ReadingTime }} 分钟阅读</small>
            </div>
          </div>
        </div>
      {{ end }}
    </div>
  {{ else }}
    <div class="alert alert-warning">该标签下暂无文章。</div>
  {{ end }}
</div>

{{ end }}
