{{ $icon_array := dict
"info" "lightbulb"
"warning" "warning"
"success" "check_circle"
"danger" "dangerous"
"default" "notifications"
"primary" "info"
}}

{{ $icon_class := dict
"info" "text-primary"
"warning" "text-warning"
"success" "text-success"
"danger" "text-danger"
"primary" "text-info"
"default" "text-primary"
}}

{{ $icon_bg_color := dict
"info" "rgba(13,110,253,0.15)"
"warning" "rgba(255,193,7,0.15)"
"success" "rgba(25,135,84,0.15)"
"danger" "rgba(220,53,69,0.15)"
"primary" "rgba(13,202,240,0.15)"
"default" "rgba(108,117,125,0.15)"
}}

{{/* 获取 alert 类型 */}}
{{ $type := .Get "type" }}
{{ if not $type }}
{{ $type = "secondary" }}
{{ end }}

{{/* 设置图标背景颜色 */}}
{{ $bgcolor := index $icon_bg_color $type }}
{{ if not $bgcolor }}
{{ $bgcolor = $icon_bg_color.default }}
{{ end }}

<div class="alert alert-{{ $type }}" role="alert" style="padding:0.5rem 1rem;">

  <!-- 图标 + 标题在同一行 -->
  <div class="d-flex align-items-start mb-1">
    {{ with .Get "icon" }}
    {{ . }}
    {{ else }}
    <span
      class="material-icons d-flex align-items-center justify-content-center rounded-circle {{ index $icon_class $type }}"
      style="width:2rem; height:2rem; font-size:1.25rem; flex-shrink:0; background-color: var(--bgcolor);">
      {{ index $icon_array $type }}
    </span>
    {{- end }}

    <span class="alert-title fw-semibold fs-5 mt-0">{{ with .Get "title" }}{{ . }}{{ else }}{{ $type }}{{ end }}</span>
  </div>

  <!-- 描述内容在下一行 -->
  {{ with .Get "text" }}
  <div>{{ . | $.Page.RenderString }}</div>
  {{ else }}
  {{ with .InnerDeindent }}
  <div>{{ . }}</div>
  {{ else }}
  {{ errorf "No valid text variable or Inner content given" }}
  {{- end }}
  {{- end }}

</div>
