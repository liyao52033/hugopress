{{ define "main" }}
    {{ $landingData := .Site.Data.landing }}
    {{ $map := newScratch }}

    {{ range $key, $value := $landingData }}
        {{ $sectionTitle := (index $key) }}
        {{ $weight := string ($value.weight) }}
        {{ $template := string (replaceRE `( |-{1,})` "_" $value.template) }}
        {{ with and $template $weight }}
            {{ $map.SetInMap "wgtTpl" $sectionTitle (dict
            "weight" $weight
            "template" $template
            "sectionTitle" $sectionTitle
            )}}
        {{ end }}
    {{ end }}

    {{ range sort ($map.Get "wgtTpl") ".weight" }}
        {{ $.Scratch.Set "sectionTitle" .sectionTitle }}
        {{ $path := printf "landing/%s.html" .template }}
        {{ partial $path $.Page }}
    {{ end }}
    {{/* printf "%s" (sort ($map.Get "wgtTpl") ".weight" ) */}}



    {{ $pages := where .Site.RegularPages "Type" "docs" }}
    {{ $paginator := .Paginate $pages 10 }}

    {{ partial "taxonomy-and-articles.html" (dict "Pages" $paginator.Pages "Title" "最新文章") }}

    <!-- 分页导航 -->
    <nav aria-label="Page navigation" class="mt-4">
      <ul class="pagination justify-content-center">
        {{ if $paginator.HasPrev }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Prev.URL }}">上一页</a>
          </li>
        {{ else }}
          <li class="page-item disabled">
            <span class="page-link">上一页</span>
          </li>
        {{ end }}

        {{ range $paginator.Pagers }}
          <li class="page-item {{ if eq . $paginator }}active{{ end }}">
            <a class="page-link" href="{{ .URL }}">{{ .PageNumber }}</a>
          </li>
        {{ end }}

        {{ if $paginator.HasNext }}
          <li class="page-item">
            <a class="page-link" href="{{ $paginator.Next.URL }}">下一页</a>
          </li>
        {{ else }}
          <li class="page-item disabled">
            <span class="page-link">下一页</span>
          </li>
        {{ end }}
      </ul>
    </nav>


{{ end }}
